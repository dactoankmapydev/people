<!DOCTYPE html>
<html lang="vi">

<head>
   <title> Requests + bs4 <= Requests-HTML  - The PyMiers</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="robots" content="" />
  <link rel="stylesheet" type="text/css" href="theme/css/app.css">
<link rel="stylesheet" type="text/css" href="http://pp.pymi.vn/theme/css/pygment.css">
  <link href="https://fonts.googleapis.com/css?family=Lora|Oswald" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <meta name="author" content="Pymiers" />
  <meta name="description" content="" />    <link href="http://pp.pymi.vn/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The PyMiers Full Atom Feed" />       <link href="http://pp.pymi.vn/feeds/trang-chu.atom.xml" type="application/atom+xml" rel="alternate" title="The PyMiers Categories Atom Feed" />     
  <meta name="tags" content="requests-html" />
  <meta name="tags" content="bs4" />
  <meta name="tags" content="requests" />
  <meta name="tags" content="python" />
  <meta name="tags" content="crawl" />
</head>

<body>
  <main class="wrapper">
    <section class="container">
      <header class='column'>
        <h1 class='title'><a href="http://pp.pymi.vn/">The PyMiers</a></h1>
      </header>

      <div class="section">
        <div class="row navbar">
          <div class="column nav-item is-active"><a href="http://pp.pymi.vn/category/trang-chu/">Trang chủ</a></div>
           <div class="column nav-item "><a href="http://pp.pymi.vn/pages/about/">About</a></div>
          <div class="column nav-item "><a href="http://pp.pymi.vn/pages/add/">Tạo bài viết</a></div>
          <div class="column nav-item"><a href="/archives">Archives</a></div>
        </div>
      </div>
    </section>

<section class="container">
  <header>
    <h2 class="entry-title">
      <a href="http://pp.pymi.vn/article/requests-bs4-requests-html/" rel="bookmark"
         title="Permalink to Requests + bs4 <= Requests-HTML">Requests + bs4 <= Requests-HTML</a></h2>  
  </header>
  <footer class='center'>
    <time class="published" datetime="2018-05-09T00:00:00+07:00"> 09/05/2018 </time>
    <address class="vcard author">By
                    <a class="url fn" href="http://pp.pymi.vn/author/tung491/">tung491</a>
 in <a href="http://pp.pymi.vn/category/trang-chu/">Trang chủ</a>
                </address>     <em>Tags</em>:     <a href="http://pp.pymi.vn/tag/requests-html/"><em>requests-html</em></a>,     <a href="http://pp.pymi.vn/tag/bs4/"><em>bs4</em></a>,     <a href="http://pp.pymi.vn/tag/requests/"><em>requests</em></a>,     <a href="http://pp.pymi.vn/tag/python/"><em>python</em></a>,     <a href="http://pp.pymi.vn/tag/crawl/"><em>crawl</em></a>    </footer>
  <br>
  <div class="entry-content">
    <h2>Giới thiệu</h2>
<p><a href="http://html.python-requests.org/">Requests-HTML</a> được viết bởi Kenneth Reitz - tác giả của <code>requests</code> nổi tiếng, với mục đích cao cả là thay thế combo huyền thoại (với pymier) requests + bs4.  Trên trang chủ, requests-html tự mô tả như sau:</p>
<blockquote>
<p>This library intends to make parsing HTML (e.g. scraping the web) as simple and intuitive as possible</p>
</blockquote>
<p>và đặc biệt chỉ hỗ trợ python3.</p>
<h2>Các tính năng nổi bật của requests-html</h2>
<ul>
<li>Hỗ trợ đầy đủ JavaScript</li>
<li>Hỗ trợ chọn thành phần của trang bằng CSS, Xpath</li>
<li>Tự động theo chuyển trang</li>
</ul>
<h2>Demo vài tính năng nổi bật</h2>
<p>Cách cài đặt và sử dụng cơ bản của requests-html đã được tác giả nói rất rõ ở trang chủ do đó mính sẽ không nói lại nữa.</p>
<h3>Render</h3>
<p>Nhặt một đoạn văn bản mà đã được render bởi JavaScript:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">In</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">]:</span> <span style="color: #f8f8f2">r</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">session</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get(</span><span style="color: #e6db74">&#39;http://www.familug.org/&#39;</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">In</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">]:</span> <span style="color: #f8f8f2">r</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">html</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">render()</span>
<span style="color: #f8f8f2">[W:pyppeteer</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">chromium_downloader]</span> <span style="color: #f8f8f2">start</span> <span style="color: #f8f8f2">chromium</span> <span style="color: #f8f8f2">download</span><span style="color: #f92672">.</span>
<span style="color: #f8f8f2">Download</span> <span style="color: #f8f8f2">may</span> <span style="color: #f8f8f2">take</span> <span style="color: #f8f8f2">a</span> <span style="color: #f8f8f2">few</span> <span style="color: #f8f8f2">minutes</span><span style="color: #f92672">.</span>
<span style="color: #f8f8f2">[W:pyppeteer</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">chromium_downloader]</span> <span style="color: #f8f8f2">chromium</span> <span style="color: #f8f8f2">download</span> <span style="color: #f8f8f2">done</span><span style="color: #f92672">.</span>
<span style="color: #f8f8f2">[W:pyppeteer</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">chromium_downloader]</span> <span style="color: #f8f8f2">chromium</span> <span style="color: #f8f8f2">extracted</span> <span style="color: #f8f8f2">to:</span> <span style="color: #f92672">/</span><span style="color: #f8f8f2">home</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">dosontung007</span><span style="color: #f92672">/.</span><span style="color: #f8f8f2">pyppeteer</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">local</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">chromium</span><span style="color: #f92672">/</span><span style="color: #ae81ff">543305</span>
<span style="color: #f8f8f2">In</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2">]:</span> <span style="color: #f8f8f2">r</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">html</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">search(</span><span style="color: #e6db74">&#39;UEFI vs BIOS - tạo USB boot cài Windows {something} từ Ubuntu&#39;</span><span style="color: #f8f8f2">)[</span><span style="color: #e6db74">&#39;something&#39;</span><span style="color: #f8f8f2">]</span>
<span style="color: #f8f8f2">Out[</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2">]:</span> <span style="color: #e6db74">&#39;10&#39;</span>
</pre></div>


<p>Khi bạn chạy render() lần đầu, method sẽ tải về <code>Chromium headless</code> về thư mục <code>$HOME</code>.</p>
<h3>XPath Selector</h3>
<p>Requests-html hỗ trợ Xpath query như Scrapy</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>In [25]: r.html.xpath(&#39;//h3//a&#39;)
Out[25]:
[&lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&#39;&gt;,
 &lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&#39;&gt;,
 &lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2018/02/hello-2018.html&#39;&gt;,
 &lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&#39;&gt;,
 &lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&#39;&gt;,
 &lt;Element &#39;a&#39; href=&#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&#39;&gt;]
In [26]: r.html.xpath(&#39;//h3//a/@href&#39;)
Out[26]:
[&#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&#39;,
&#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&#39;,
&#39;http://www.familug.org/2018/02/hello-2018.html&#39;,
&#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&#39;,
&#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&#39;,
&#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&#39;]
</pre></div>


<h3>CSS Selector</h3>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>In [26]: sel = &#39;#Blog1 &gt; div.blog-posts.hfeed &gt; div:nth-child(1) &gt; div &gt; div &gt; div &gt; h3&#39;

In [27]: r.html.find(sel, first=True)
Out[27]: &lt;Element &#39;h3&#39; class=(&#39;post-title&#39;, &#39;entry-title&#39;) itemprop=&#39;name&#39;&gt;

In [28]: r.html.find(sel, first=True).text
Out[28]: &#39;UEFI vs BIOS - tạo USB boot cài Windows 10 từ Ubuntu&#39;
</pre></div>


<p>CSS selector này có thể copy từ developer tool của trình duyệt web.</p>
<h2>Tổng kết</h2>
<p>Requests-html là 1 thư viện tiện lợi thay thế cho combo requests + bs4, dễ dàng chuyển lên scrapy nếu cần thực hiện dự án crawling lớn, chuyên nghiệp.</p>
<p>Chi tiết hơn xem tại: http://html.python-requests.org/.</p>
<p>HẾT.</p>
<p>TUNG491 at https://pymi.vn</p>
  </div>
  <!-- /.entry-content -->
</section>
<section class="container">
  <div class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'pymier';
      var disqus_identifier = 'article/requests-bs4-requests-html/';
      var disqus_url = 'http://pp.pymi.vn/article/requests-bs4-requests-html/';
      (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//pymier.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</section>

    <section class="container footer">
      <footer>
        <address>
        Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
        which takes great advantage of <a href="http://python.org">Python</a>.
        </address>
        <address>
          Học lập trình Python tại <a href="https://pymi.vn/">Pymi.vn</a>
        </address>
      </footer>
    </section>
  </main>

</body>

</html>